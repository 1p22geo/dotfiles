# ######## Window rules ########

# Uncomment to apply global transparency to all windows:
# windowrulev2 = opacity 0.89 override 0.89 override, class:.*

# Disable blur for xwayland context menus
windowrule {
  name = windowrule-1
  no_blur = on
  match:class = ^()$
  match:title = ^()$
}

# windowrulev2 = noblur, xwayland:1


# Floating
windowrule {
  name = windowrule-2
  center = on
  float = on
  match:title = ^(Open File)(.*)$
}

windowrule {
  name = windowrule-3
  center = on
  float = on
  match:title = ^(Select a File)(.*)$
}

windowrule {
  name = windowrule-4
  center = on
  float = on
  size = (monitor_w*0.6) (monitor_h*0.65)
  match:title = ^(Choose wallpaper)(.*)$
}

windowrule {
  name = windowrule-5
  center = on
  float = on
  match:title = ^(Open Folder)(.*)$
}

windowrule {
  name = windowrule-6
  center = on
  float = on
  match:title = ^(Save As)(.*)$
}

windowrule {
  name = windowrule-7
  center = on
  float = on
  match:title = ^(Library)(.*)$
}

windowrule {
  name = windowrule-8
  center = on
  float = on
  match:title = ^(File Upload)(.*)$
}

windowrule {
  name = windowrule-9
  center = on
  float = on
  match:title = ^(.*)(wants to save)$
}

windowrule {
  name = windowrule-10
  center = on
  float = on
  match:title = ^(.*)(wants to open)$
}

windowrule {
  name = windowrule-11
  float = on
  match:class = ^(blueberry\.py)$
}

windowrule {
  name = windowrule-12
  float = on
  match:class = ^(guifetch)$   # FlafyDev/guifetch
}

windowrule {
  name = windowrule-13
  float = on
  size = (monitor_w*0.45)
  center = on
  match:class = ^(pavucontrol)$
}

windowrule {
  name = windowrule-14
  float = on
  size = (monitor_w*0.45)
  center = on
  match:class = ^(org.pulseaudio.pavucontrol)$
}

windowrule {
  name = windowrule-15
  float = on
  size = (monitor_w*0.45)
  center = on
  match:class = ^(nm-connection-editor)$
}

windowrule {
  name = windowrule-16
  float = on
  match:class = .*plasmawindowed.*
}

windowrule {
  name = windowrule-17
  float = on
  match:class = kcm_.*
}

windowrule {
  name = windowrule-18
  float = on
  match:class = .*bluedevilwizard
}

windowrule {
  name = windowrule-19
  float = on
  match:title = .*Welcome
}

windowrule {
  name = windowrule-20
  float = on
  match:title = ^(illogical-impulse Settings)$
}

windowrule {
  name = windowrule-21
  float = on
  match:title = .*Shell conflicts.*
}

windowrule {
  name = windowrule-22
  float = on
  size = (monitor_w*0.6) (monitor_h*0.65)
  match:class = org.freedesktop.impl.portal.desktop.kde
}

windowrule {
  name = windowrule-23
  float = on
  size = (monitor_w*0.45)
  match:class = ^(Zotero)$
}


# Move
# kde-material-you-colors spawns a window when changing dark/light theme. This is to make sure it doesn't interfere at all.
windowrule {
  name = windowrule-24
  float = on
  no_initial_focus = on
  move = (999999) (999999)
  match:class = ^(plasma-changeicons)$
}

# stupid dolphin copy
windowrule {
  name = windowrule-25
  move = (40) (80)
  match:title = ^(Copying â€” Dolphin)$
}


# Tiling
windowrule {
  name = windowrule-26
  tile = on
  match:class = ^dev\.warp\.Warp$
}


# Picture-in-Picture
windowrule {
  name = windowrule-27
  float = on
  keep_aspect_ratio = on
  move = ((monitor_w*0.73)) ((monitor_h*0.72))
  size = (monitor_w*0.25)
  pin = on
  match:title = ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
}


# --- Tearing ---
windowrule {
  name = windowrule-28
  immediate = on
  match:title = .*\.exe
}

windowrule {
  name = windowrule-29
  immediate = on
  match:title = .*minecraft.*
}

windowrule {
  name = windowrule-30
  immediate = on
  match:class = ^(steam_app).*
}


# Fix Jetbrain IDEs focus/rerendering problem
windowrule {
  name = windowrule-31
  no_initial_focus = on
  match:class = ^jetbrains-.*$
  match:float = 1
  match:title = ^$|^\s$|^win\d+$
}


# No shadow for tiled windows (matches windows that are not floating).
windowrule {
  name = windowrule-32
  no_shadow = on
  match:float = 0
}


# ######## Workspace rules ########
workspace = special:special, gapsout:30

# ######## Layer rules ########
layerrule {
  name = layerrule-1
  xray = 1
  match:namespace = .*
}

# layerrule = noanim, .*
layerrule {
  name = layerrule-2
  no_anim = on
  match:namespace = walker
}

layerrule {
  name = layerrule-3
  no_anim = on
  match:namespace = selection
}

layerrule {
  name = layerrule-4
  no_anim = on
  match:namespace = overview
}

layerrule {
  name = layerrule-5
  no_anim = on
  match:namespace = anyrun
}

layerrule {
  name = layerrule-6
  no_anim = on
  blur = on
  ignore_alpha = 0.6
  match:namespace = indicator.*
}

layerrule {
  name = layerrule-7
  no_anim = on
  match:namespace = osk
}

layerrule {
  name = layerrule-8
  no_anim = on
  match:namespace = hyprpicker
}


layerrule {
  name = layerrule-9
  no_anim = on
  match:namespace = noanim
}

layerrule {
  name = layerrule-10
  blur = on
  ignore_alpha = 0
  match:namespace = gtk-layer-shell
}

layerrule {
  name = layerrule-11
  blur = on
  ignore_alpha = 0.5
  match:namespace = launcher
}

layerrule {
  name = layerrule-12
  blur = on
  ignore_alpha = 0.69
  match:namespace = notifications
}

layerrule {
  name = layerrule-13
  blur = on
  match:namespace = logout_dialog # wlogout
}


# ags
layerrule {
  name = layerrule-14
  animation = slide left
  match:namespace = sideleft.*
}

layerrule {
  name = layerrule-15
  animation = slide right
  match:namespace = sideright.*
}

layerrule {
  name = layerrule-16
  blur = on
  match:namespace = session[0-9]*
}

layerrule {
  name = layerrule-17
  blur = on
  ignore_alpha = 0.6
  match:namespace = bar[0-9]*
}

layerrule {
  name = layerrule-18
  blur = on
  ignore_alpha = 0.6
  match:namespace = barcorner.*
}

layerrule {
  name = layerrule-19
  blur = on
  ignore_alpha = 0.6
  match:namespace = dock[0-9]*
}

layerrule {
  name = layerrule-20
  blur = on
  ignore_alpha = 0.6
  match:namespace = overview[0-9]*
}

layerrule {
  name = layerrule-21
  blur = on
  ignore_alpha = 0.6
  match:namespace = cheatsheet[0-9]*
}

layerrule {
  name = layerrule-22
  blur = on
  ignore_alpha = 0.6
  match:namespace = sideright[0-9]*
}

layerrule {
  name = layerrule-23
  blur = on
  ignore_alpha = 0.6
  match:namespace = sideleft[0-9]*
}

layerrule {
  name = layerrule-24
  blur = on
  ignore_alpha = 0.6
  match:namespace = osk[0-9]*
}


# Quickshell
layerrule {
  name = layerrule-25
  blur_popups = on
  blur = on
  ignore_alpha = 0.79
  match:namespace = quickshell:.*
}

layerrule {
  name = layerrule-26
  animation = slide
  match:namespace = quickshell:bar
}

layerrule {
  name = layerrule-27
  animation = slide bottom
  match:namespace = quickshell:cheatsheet
}

layerrule {
  name = layerrule-28
  animation = slide bottom
  match:namespace = quickshell:dock
}

layerrule {
  name = layerrule-29
  animation = popin 120%
  match:namespace = quickshell:screenCorners
}

layerrule {
  name = layerrule-30
  no_anim = on
  match:namespace = quickshell:lockWindowPusher
}

layerrule {
  name = layerrule-31
  animation = fade
  match:namespace = quickshell:notificationPopup
}

layerrule {
  name = layerrule-32
  no_anim = on
  match:namespace = quickshell:overlay
}

layerrule {
  name = layerrule-33
  no_anim = on
  match:namespace = quickshell:overview
}

layerrule {
  name = layerrule-34
  animation = slide bottom
  match:namespace = quickshell:osk
}

layerrule {
  name = layerrule-35
  no_anim = on
  match:namespace = quickshell:polkit
}

layerrule {
  name = layerrule-36
  xray = 0
  match:namespace = quickshell:popup # No weird color for bar tooltips (this in theory should suffice)
}

layerrule {
  name = layerrule-37
  ignore_alpha = 1
  match:namespace = quickshell:popup # No weird color for bar tooltips (but somehow this is necessary)
}

layerrule {
  name = layerrule-38
  ignore_alpha = 1
  match:namespace = quickshell:mediaControls # Same as above
}

layerrule {
  name = layerrule-39
  no_anim = on
  match:namespace = quickshell:regionSelector
}

layerrule {
  name = layerrule-40
  no_anim = on
  match:namespace = quickshell:screenshot
}

layerrule {
  name = layerrule-41
  blur = on
  no_anim = on
  ignore_alpha = 0
  match:namespace = quickshell:session
}

layerrule {
  name = layerrule-42
  animation = slide right
  match:namespace = quickshell:sidebarRight
}

layerrule {
  name = layerrule-43
  animation = slide left
  match:namespace = quickshell:sidebarLeft
}

layerrule {
  name = layerrule-44
  animation = slide
  match:namespace = quickshell:verticalBar
}

layerrule {
  name = layerrule-45
  animation = slide top
  match:namespace = quickshell:wallpaperSelector
}


# Launchers need to be FAST
layerrule {
  name = layerrule-46
  no_anim = on
  match:namespace = gtk4-layer-shell
}

